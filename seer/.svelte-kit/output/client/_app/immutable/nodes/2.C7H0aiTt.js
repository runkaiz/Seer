import{f as p,a as c,c as Ze,t as Kt}from"../chunks/DQzTVXwp.js";import{a as Ot,o as Dt}from"../chunks/ziqNh-sv.js";import{c as bt,h as Le,Q as Qt,l as Ut,a as Zt,b as $t,C as e,au as ea,r as ta,H as aa,s as Nt,d as ht,n as nt,Y as ra,an as sa,m as St,t as la,i as at,al as Ft,aJ as Bt,aF as ia,$ as Pt,a8 as Ct,j as Gt,p as na,aK as ut,aL as _t,k as qt,aM as mt,aN as oa,Z as da,aO as ca,ak as va,aP as ua,S as ma,aQ as zt,q as fa,aR as xa,aS as ga,aT as pa,aU as ba,aV as ha,aH as _a,y as ka,a0 as ya,aW as wa,G as ot,aG as ae,av as It,v as vt,aI as Je,aw as x,P as n,M as l,O as r,K as dt,J as L,I as $e,a9 as rt}from"../chunks/DQYrmzXI.js";import{d as ft,s as h}from"../chunks/BqevFqEi.js";import{i as E}from"../chunks/DdIbhXnm.js";import{r as Sa,s as tt}from"../chunks/CHkkzptq.js";import"../chunks/BzBJXRCb.js";function Re(s,a){return a}function Ia(s,a,t){for(var i=s.items,d=[],o=a.length,v=0;v<o;v++)ca(a[v].e,d,!0);var m=o>0&&d.length===0&&t!==null;if(m){var O=t.parentNode;va(O),O.append(t),i.clear(),Oe(s,a[0].prev,a[o-1].next)}ua(d,()=>{for(var C=0;C<o;C++){var q=a[C];m||(i.delete(q.k),Oe(s,q.prev,q.next)),qt(q.e,!m)}})}function he(s,a,t,i,d,o=null){var v=s,m={flags:a,items:new Map,first:null},O=(a&zt)!==0;if(O){var C=s;v=Le?bt(Qt(C)):C.appendChild(Ut())}Le&&Zt();var q=null,J=!1,X=new Map,$=ea(()=>{var G=t();return Bt(G)?G:G==null?[]:Ft(G)}),k,D;function P(){Aa(D,k,m,X,v,d,a,i,t),o!==null&&(k.length===0?q?Gt(q):q=St(()=>o(v)):q!==null&&na(q,()=>{q=null}))}$t(()=>{D??=ma,k=e($);var G=k.length;if(J&&G===0)return;J=G===0;let K=!1;if(Le){var j=ta(v)===aa;j!==(G===0)&&(v=Nt(),bt(v),ht(!1),K=!0)}if(Le){for(var U=null,_,f=0;f<G;f++){if(nt.nodeType===ra&&nt.data===sa){v=nt,K=!0,ht(!1);break}var u=k[f],b=i(u,f);_=At(nt,m,U,null,u,b,f,d,a,t),m.items.set(b,_),U=_}G>0&&bt(Nt())}if(Le)G===0&&o&&(q=St(()=>o(v)));else if(la()){var z=new Set,F=at;for(f=0;f<G;f+=1){u=k[f],b=i(u,f);var S=m.items.get(b)??X.get(b);S?(a&(mt|ut))!==0&&Vt(S,u,f,a):(_=At(null,m,null,null,u,b,f,d,a,t,!0),X.set(b,_)),z.add(b)}for(const[W,Q]of m.items)z.has(W)||F.skipped_effects.add(Q.e);F.oncommit(P)}else P();K&&ht(!0),e($)}),Le&&(v=nt)}function Aa(s,a,t,i,d,o,v,m,O){var C=(v&xa)!==0,q=(v&(mt|ut))!==0,J=a.length,X=t.items,$=t.first,k=$,D,P=null,G,K=[],j=[],U,_,f,u;if(C)for(u=0;u<J;u+=1)U=a[u],_=m(U,u),f=X.get(_),f!==void 0&&(f.a?.measure(),(G??=new Set).add(f));for(u=0;u<J;u+=1){if(U=a[u],_=m(U,u),f=X.get(_),f===void 0){var b=i.get(_);if(b!==void 0){i.delete(_),X.set(_,b);var z=P?P.next:k;Oe(t,P,b),Oe(t,b,z),kt(b,z,d),P=b}else{var F=k?k.e.nodes_start:d;P=At(F,t,P,P===null?t.first:P.next,U,_,u,o,v,O)}X.set(_,P),K=[],j=[],k=P.next;continue}if(q&&Vt(f,U,u,v),(f.e.f&_t)!==0&&(Gt(f.e),C&&(f.a?.unfix(),(G??=new Set).delete(f))),f!==k){if(D!==void 0&&D.has(f)){if(K.length<j.length){var S=j[0],W;P=S.prev;var Q=K[0],ee=K[K.length-1];for(W=0;W<K.length;W+=1)kt(K[W],S,d);for(W=0;W<j.length;W+=1)D.delete(j[W]);Oe(t,Q.prev,ee.next),Oe(t,P,Q),Oe(t,ee,S),k=S,P=ee,u-=1,K=[],j=[]}else D.delete(f),kt(f,k,d),Oe(t,f.prev,f.next),Oe(t,f,P===null?t.first:P.next),Oe(t,P,f),P=f;continue}for(K=[],j=[];k!==null&&k.k!==_;)(k.e.f&_t)===0&&(D??=new Set).add(k),j.push(k),k=k.next;if(k===null)continue;f=k}K.push(f),P=f,k=f.next}if(k!==null||D!==void 0){for(var ne=D===void 0?[]:Ft(D);k!==null;)(k.e.f&_t)===0&&ne.push(k),k=k.next;var _e=ne.length;if(_e>0){var ke=(v&zt)!==0&&J===0?d:null;if(C){for(u=0;u<_e;u+=1)ne[u].a?.measure();for(u=0;u<_e;u+=1)ne[u].a?.fix()}Ia(t,ne,ke)}}C&&fa(()=>{if(G!==void 0)for(f of G)f.a?.apply()}),s.first=t.first&&t.first.e,s.last=P&&P.e;for(var ve of i.values())qt(ve.e);i.clear()}function Vt(s,a,t,i){(i&mt)!==0&&Ct(s.v,a),(i&ut)!==0?Ct(s.i,t):s.i=t}function At(s,a,t,i,d,o,v,m,O,C,q){var J=(O&mt)!==0,X=(O&oa)===0,$=J?X?ia(d,!1,!1):Pt(d):d,k=(O&ut)===0?v:Pt(v),D={i:k,v:$,k:o,a:null,e:null,prev:t,next:i};try{if(s===null){var P=document.createDocumentFragment();P.append(s=Ut())}return D.e=St(()=>m(s,$,k,C),Le),D.e.prev=t&&t.e,D.e.next=i&&i.e,t===null?q||(a.first=D):(t.next=D,t.e.next=D.e),i!==null&&(i.prev=D,i.e.prev=D.e),D}finally{}}function kt(s,a,t){for(var i=s.next?s.next.e.nodes_start:t,d=a?a.e.nodes_start:t,o=s.e.nodes_start;o!==null&&o!==i;){var v=da(o);d.before(o),o=v}}function Oe(s,a,t){a===null?s.first=t:(a.next=t,a.e.next=t&&t.e),t!==null&&(t.prev=a,t.e.prev=a&&a.e)}const jt=[...` 	
\r\f¬†\v\uFEFF`];function Ta(s,a,t){var i=s==null?"":""+s;if(a&&(i=i?i+" "+a:a),t){for(var d in t)if(t[d])i=i?i+" "+d:d;else if(i.length)for(var o=d.length,v=0;(v=i.indexOf(d,v))>=0;){var m=v+o;(v===0||jt.includes(i[v-1]))&&(m===i.length||jt.includes(i[m]))?i=(v===0?"":i.substring(0,v))+i.substring(m+1):v=m}}return i===""?null:i}function Ea(s,a){return s==null?null:String(s)}function ge(s,a,t,i,d,o){var v=s.__className;if(Le||v!==t||v===void 0){var m=Ta(t,i,o);(!Le||m!==s.getAttribute("class"))&&(m==null?s.removeAttribute("class"):a?s.className=m:s.setAttribute("class",m)),s.__className=t}else if(o&&d!==o)for(var O in o){var C=!!o[O];(d==null||C!==!!d[O])&&s.classList.toggle(O,C)}return o}function Ra(s,a,t,i){var d=s.__style;if(Le||d!==a){var o=Ea(a);(!Le||o!==s.getAttribute("style"))&&(o==null?s.removeAttribute("style"):s.style.cssText=o),s.__style=a}return i}function Yt(s,a,t=!1){if(s.multiple){if(a==null)return;if(!Bt(a))return pa();for(var i of s.options)i.selected=a.includes(Wt(i));return}for(i of s.options){var d=Wt(i);if(ba(d,a)){i.selected=!0;return}}(!t||a!==void 0)&&(s.selectedIndex=-1)}function La(s){var a=new MutationObserver(()=>{Yt(s,s.__value)});a.observe(s,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ga(()=>{a.disconnect()})}function Wt(s){return"__value"in s?s.__value:s.value}function Na(s,a,t=a){var i=new WeakSet;ha(s,"input",async d=>{var o=d?s.defaultValue:s.value;if(o=yt(s)?wt(o):o,t(o),at!==null&&i.add(at),await _a(),o!==(o=a())){var v=s.selectionStart,m=s.selectionEnd,O=s.value.length;if(s.value=o??"",m!==null){var C=s.value.length;v===m&&m===O&&C>O?(s.selectionStart=C,s.selectionEnd=C):(s.selectionStart=v,s.selectionEnd=Math.min(m,C))}}}),(Le&&s.defaultValue!==s.value||ka(a)==null&&s.value)&&(t(yt(s)?wt(s.value):s.value),at!==null&&i.add(at)),ya(()=>{var d=a();if(s===document.activeElement){var o=wa??at;if(i.has(o))return}yt(s)&&d===wt(s.value)||s.type==="date"&&!d&&!s.value||d!==s.value&&(s.value=d??"")})}function yt(s){var a=s.type;return a==="number"||a==="range"}function wt(s){return s===""?null:+s}const Pa=globalThis.__sveltekit_1l9aqs4.env,Jt=Pa.PUBLIC_API_URL||"http://localhost:8000/api";class Xt extends Error{constructor(a,t,i){super(a),this.status=t,this.detail=i,this.name="APIError"}}let xt=null,gt={status:"unknown",updatedAt:0};const Tt=new Set,Et=new Set;function Ca(){return xt}function ja(){return gt}function Wa(s){return Tt.add(s),s(gt),()=>Tt.delete(s)}function Ma(s){return Et.add(s),s(xt),()=>Et.delete(s)}function Ha(){Tt.forEach(s=>s(gt))}function Oa(){Et.forEach(s=>s(xt))}function st(s){gt={status:s,updatedAt:Date.now()},Ha()}function Da(s){xt=s,Oa()}function Ua(s){const a=s.get("X-RateLimit-Limit"),t=s.get("X-RateLimit-Remaining"),i=s.get("X-RateLimit-Reset");return a&&t&&i?{limit:parseInt(a,10),remaining:parseInt(t,10),reset:parseInt(i,10)}:null}async function Fa(s,a=5){try{const t=new URLSearchParams({query:s,limit:a.toString()}),i=await fetch(`${Jt}/search?${t}`);if(!i.ok){const d=await i.json().catch(()=>({}));throw i.status!==429&&st("error"),new Xt("Failed to search anime",i.status,d.detail||i.statusText)}return st("ok"),i.json()}catch(t){throw st("error"),t}}async function Ba(s,a,t=[]){try{const i=await fetch(`${Jt}/recommend`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({anime_history:s,mode:a,exclude_ids:t})}),d=Ua(i.headers);if(d&&Da(d),!i.ok){const o=await i.json().catch(()=>({}));throw i.status!==429&&st("error"),new Xt("Failed to get recommendation",i.status,o.detail||i.statusText)}return st("ok"),i.json()}catch(i){throw st("error"),i}}const Rt="seer_anime_history",Mt="watching",Ga=["watching","completed","backlog","ignored"],qa={watched:"completed",watching:"watching"};function Lt(s){return s.map(a=>{const t=a.watch_status??(a.has_seen?"watched":Mt),i=qa[t]??t,d=Ga.includes(i)?i:Mt;return{...a,watch_status:d,has_seen:d==="completed"}})}function za(){if(typeof window>"u")return[];try{const s=localStorage.getItem(Rt);if(!s)return[];const a=JSON.parse(s);return Lt(a.anime_history||[])}catch(s){return console.error("Failed to load history from localStorage:",s),[]}}function Ht(s){if(!(typeof window>"u"))try{const a={anime_history:Lt(s)};localStorage.setItem(Rt,JSON.stringify(a))}catch(a){throw console.error("Failed to save history to localStorage:",a),a}}function Va(s){const t=JSON.stringify({anime_history:s},null,2),i=new Blob([t],{type:"application/json"}),d=URL.createObjectURL(i),o=document.createElement("a");o.href=d,o.download=`seer_history_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(d)}function Ya(s){return new Promise((a,t)=>{const i=new FileReader;i.onload=d=>{try{const o=d.target?.result,v=JSON.parse(o);if(!v.anime_history||!Array.isArray(v.anime_history))throw new Error("Invalid history file format");a(Lt(v.anime_history))}catch(o){t(o)}},i.onerror=()=>t(new Error("Failed to read file")),i.readAsText(s)})}function Ja(){typeof window>"u"||localStorage.removeItem(Rt)}var Xa=p('<div class="absolute right-4 top-1/2 -translate-y-1/2"><div class="inline-block h-5 w-5 animate-spin rounded-full border-2 border-solid border-indigo-600 border-r-transparent"></div></div>'),Ka=p('<p class="mt-2 text-sm text-red-600 dark:text-red-400"> </p>'),Qa=p('<p class="mt-2 text-xs text-slate-500 dark:text-slate-400">Type at least 3 characters to search</p>'),Za=p('<div class="shrink-0 w-20 sm:w-24"><img class="w-full rounded-lg shadow-md object-cover" loading="lazy"/></div>'),$a=p('<div class="shrink-0 w-20 sm:w-24 h-28 sm:h-32 bg-slate-200 dark:bg-slate-700 rounded-lg flex items-center justify-center"><span class="text-2xl">üé¨</span></div>'),er=p('<span class="px-2 py-0.5 text-xs rounded-full bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300"> </span>'),tr=p('<div class="flex flex-wrap gap-1.5 mb-2"></div>'),ar=p('<p class="text-sm text-slate-600 dark:text-slate-400 line-clamp-2 svelte-1e5kcgt"> </p>'),rr=p("<span> </span>"),sr=p("<span> </span>"),lr=p('<button class="w-full p-4 rounded-xl border text-left transition-all bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-400 hover:shadow-lg hover:-translate-y-0.5 animate-slide-in"><div class="flex gap-4"><!> <div class="flex-1 min-w-0"><h4 class="font-semibold text-slate-900 dark:text-slate-100 mb-1"> </h4> <!> <!> <div class="flex items-center gap-3 mt-2 text-xs text-slate-500 dark:text-slate-500"><!> <!></div></div></div></button>'),ir=p('<div class="space-y-3 animate-fade-in"><h3 class="text-sm font-medium text-slate-700 dark:text-slate-300">Select the anime you watched:</h3> <!></div>'),nr=p('<div class="text-center py-12 text-slate-500 dark:text-slate-400"><div class="text-4xl mb-3">üîç</div> <p class="font-medium"> </p> <p class="text-sm mt-1">Try a different title or check your spelling</p></div>'),or=p(`<div class="max-w-2xl mx-auto"><div class="text-center mb-8"><h2 class="text-3xl font-bold text-slate-900 dark:text-slate-100 mb-3">Welcome to Seer</h2> <p class="text-lg text-slate-600 dark:text-slate-400 mb-2">Start by searching for an anime you recently enjoyed</p> <p class="text-sm text-slate-500 dark:text-slate-500">We'll use this to understand your tastes and recommend something new</p></div> <div class="mb-6"><div class="relative"><input type="text" placeholder="Start typing an anime title... (e.g., 'Cowboy Bebop')" class="w-full px-4 py-3 pr-12 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow" autocomplete="off"/> <!></div> <!></div> <!></div>`);function dr(s,a){ot(a,!0);let t=ae(""),i=ae(It([])),d=ae(!1),o=ae(null),v=null;const m=Je(()=>e(t).trim()),O=u=>{const b=u===null?Number.NEGATIVE_INFINITY:Number(u);return Number.isFinite(b)?b:Number.NEGATIVE_INFINITY};async function C(u){if(u.length<3){x(i,[],!0);return}x(d,!0),x(o,null);try{const b=await Fa(u);x(i,[...b.results].sort((z,F)=>O(F.score)-O(z.score)),!0)}catch(b){x(o,b instanceof Error?b.message:"Search failed",!0),x(i,[],!0),console.error("Search error:",b)}finally{x(d,!1)}}vt(()=>{if(v&&clearTimeout(v),e(m).length<3){x(i,[],!0),x(o,null);return}v=setTimeout(()=>{C(e(m))},400)});function q(u){if(a.history.length>0)return;const b={...u,has_seen:!0,rating:"positive",watch_status:"completed"};a.onAnimeSelected(b)}var J=or(),X=n(l(J),2),$=l(X),k=l($);Sa(k);var D=n(k,2);{var P=u=>{var b=Xa();c(u,b)};E(D,u=>{e(d)&&u(P)})}r($);var G=n($,2);{var K=u=>{var b=Ka(),z=l(b,!0);r(b),L(()=>h(z,e(o))),c(u,b)},j=u=>{var b=Ze(),z=$e(b);{var F=S=>{var W=Qa();c(S,W)};E(z,S=>{e(m).length>0&&e(m).length<3&&S(F)},!0)}c(u,b)};E(G,u=>{e(o)?u(K):u(j,!1)})}r(X);var U=n(X,2);{var _=u=>{var b=ir(),z=n(l(b),2);he(z,19,()=>e(i),F=>F.mal_id,(F,S,W)=>{var Q=lr();Q.__click=()=>q(e(S));var ee=l(Q),ne=l(ee);{var _e=g=>{var N=Za(),w=l(N);r(N),L(()=>{tt(w,"src",e(S).image_url),tt(w,"alt",`${e(S).title} poster`)}),c(g,N)},ke=g=>{var N=$a();c(g,N)};E(ne,g=>{e(S).image_url?g(_e):g(ke,!1)})}var ve=n(ne,2),pe=l(ve),De=l(pe,!0);r(pe);var Ne=n(pe,2);{var Ue=g=>{var N=tr();he(N,21,()=>e(S).genres.slice(0,4),Re,(w,Ae)=>{var ye=er(),qe=l(ye,!0);r(ye),L(()=>h(qe,e(Ae))),c(w,ye)}),r(N),c(g,N)};E(Ne,g=>{e(S).genres.length>0&&g(Ue)})}var Pe=n(Ne,2);{var Fe=g=>{var N=ar(),w=l(N,!0);r(N),L(()=>h(w,e(S).synopsis)),c(g,N)};E(Pe,g=>{e(S).synopsis&&g(Fe)})}var Ie=n(Pe,2),Be=l(Ie);{var Ge=g=>{var N=rr(),w=l(N);r(N),L(()=>h(w,`Score: ${e(S).score??""}`)),c(g,N)};E(Be,g=>{e(S).score&&g(Ge)})}var Xe=n(Be,2);{var We=g=>{var N=sr(),w=l(N);r(N),L(()=>h(w,`${e(S).episodes??""} episodes`)),c(g,N)};E(Xe,g=>{e(S).episodes&&g(We)})}r(Ie),r(ve),r(ee),r(Q),L(()=>{Ra(Q,`animation-delay: ${e(W)*50}ms`),h(De,e(S).title)}),c(F,Q)}),r(b),c(u,b)},f=u=>{var b=Ze(),z=$e(b);{var F=S=>{var W=nr(),Q=n(l(W),2),ee=l(Q);r(Q),rt(2),r(W),L(()=>h(ee,`No results found for "${e(m)??""}"`)),c(S,W)};E(z,S=>{!e(d)&&e(m).length>=2&&S(F)},!0)}c(u,b)};E(U,u=>{e(i).length>0?u(_):u(f,!1)})}r(J),Na(k,()=>e(t),u=>x(t,u)),c(s,J),dt()}ft(["click"]);var cr=p('<div class="shrink-0 w-24 sm:w-32"><img class="w-full rounded-lg shadow-lg object-cover" loading="eager"/></div>'),vr=p('<div class="shrink-0 w-24 sm:w-32 h-36 sm:h-48 bg-slate-200 dark:bg-slate-700 rounded-lg flex items-center justify-center"><span class="text-4xl">üé¨</span></div>'),ur=p('<span class="flex items-center gap-1"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg> </span>'),mr=p("<span> </span>"),fr=p('<span class="hidden sm:inline"> </span>'),xr=p('<span class="px-3 py-1 text-sm rounded-full bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 font-medium"> </span>'),gr=p('<span class="px-3 py-1 text-sm rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300"> </span>'),pr=p('<p class="text-slate-700 dark:text-slate-300 mb-6 leading-relaxed"> </p>'),br=p('<button type="button" class="flex flex-col items-center gap-1 px-3 py-1.5 rounded-lg hover:bg-emerald-50 dark:hover:bg-emerald-900/20 text-slate-700 dark:text-slate-200"><span class="text-2xl"> </span> <span class="text-xs"> </span></button>'),hr=p('<div class="flex flex-wrap items-center justify-center gap-3 rounded-xl border border-emerald-200 dark:border-emerald-800 bg-white/80 dark:bg-slate-900/40 p-3 text-sm"></div>'),_r=p('<li class="flex gap-2"><span class="text-slate-400">‚Ä¢</span> <span><span class="font-semibold"> </span> </span></li>'),kr=p('<ul class="space-y-1.5 text-sm text-slate-600 dark:text-slate-300 list-none"></ul>'),yr=p('<span class="px-2 py-1 rounded-md bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"> </span>'),wr=p('<div><h4 class="font-medium text-slate-700 dark:text-slate-300 mb-2">Preferred Genres</h4> <div class="flex flex-wrap gap-2"></div></div>'),Sr=p('<span class="px-2 py-1 rounded-md bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"> </span>'),Ir=p('<div><h4 class="font-medium text-slate-700 dark:text-slate-300 mb-2">Preferred Themes</h4> <div class="flex flex-wrap gap-2"></div></div>'),Ar=p('<span class="px-2 py-1 rounded-md bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300"> </span>'),Tr=p('<div><h4 class="font-medium text-slate-700 dark:text-slate-300 mb-2">Avoiding</h4> <div class="flex flex-wrap gap-2"></div></div>'),Er=p('<div><h4 class="font-medium text-slate-700 dark:text-slate-300 mb-2">Notes</h4> <p class="text-slate-600 dark:text-slate-400"> </p></div>'),Rr=p('<div class="mt-4 space-y-4 text-sm"><!> <!> <!> <!></div>'),Lr=p('<div class="bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6"><button class="w-full flex items-center justify-between text-left"><h3 class="text-lg font-semibold text-slate-900 dark:text-slate-100">Your Taste Profile</h3> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>'),Nr=p('<div class="max-w-3xl mx-auto"><div><div class="flex gap-4 sm:gap-6 mb-6"><!> <div class="flex-1 min-w-0"><div class="mb-4"><span class="text-xs sm:text-sm font-medium text-indigo-600 dark:text-indigo-400">Your Next Discovery</span> <h2 class="text-2xl sm:text-3xl font-bold text-slate-900 dark:text-slate-100 mt-2 leading-tight"> </h2></div> <div class="flex flex-col gap-1 mb-4 text-sm"><span> </span> <span class="text-slate-500 dark:text-slate-400 text-xs"> </span></div> <div class="flex items-center gap-3 sm:gap-4 text-xs sm:text-sm text-slate-600 dark:text-slate-400"><!> <!> <!></div></div></div> <div class="flex flex-wrap gap-2 mb-4"><!> <!></div> <!> <div class="bg-linear-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-lg p-4 mb-6 border border-indigo-100 dark:border-indigo-800"><h3 class="text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2">Why this recommendation?</h3> <p class="text-slate-600 dark:text-slate-400 text-sm leading-relaxed"> </p></div> <div class="space-y-5"><div class="rounded-2xl border border-slate-200 dark:border-slate-700 bg-slate-50/70 dark:bg-slate-900/20 p-5 space-y-4"><button type="button" class="w-full flex items-center justify-center gap-2 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white font-semibold text-base py-3 transition-colors"><span class="text-lg">‚ñ∂Ô∏é</span> <span>Start / Add to watchlist</span></button> <p class="text-xs text-center text-slate-500 dark:text-slate-400">Lock it in now and we‚Äôll pin it to your queue.</p> <div class="flex flex-wrap items-center gap-2 sm:gap-3 text-xs sm:text-sm"><button type="button" class="flex items-center gap-1.5 font-medium text-slate-700 dark:text-slate-200 hover:text-emerald-600"><span class="text-emerald-500">‚úì</span> <span>Already watched</span></button> <button type="button" class="flex items-center gap-1.5 text-slate-500 dark:text-slate-400 hover:text-red-500"><span class="text-base">√ó</span> <span>Not interested</span></button> <button type="button" class="sm:ml-auto flex items-center gap-1 text-xs text-slate-500 dark:text-slate-400 hover:text-slate-800"><span>‚ìò</span> <span> </span></button></div> <!> <!></div> <div class="text-center"><button type="button" class="text-xs font-medium text-slate-500 dark:text-slate-400 hover:text-indigo-600 hover:underline underline-offset-4">Need another vibe? Try a different pick</button></div></div></div> <!></div>'),Pr=p(`<div class="max-w-2xl mx-auto text-center py-12"><div class="text-6xl mb-4">üé¨</div> <h2 class="text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2">Ready to discover something new?</h2> <p class="text-slate-600 dark:text-slate-400">Add a show to your watchlist, then use the Get recommendation button
            when you're ready.</p></div>`);function Cr(s,a){ot(a,!0);let t=ae(!1),i=ae(!1),d=ae(!1),o=ae(!1),v=null;const m=[{icon:"üôÇ",label:"Loved it",value:"positive"},{icon:"üòê",label:"It was ok",value:"neutral"},{icon:"ü§Æ",label:"Not for me",value:"negative"}],O={explore:{label:"Explore mode",description:"Casting a wide net to surprise you",accent:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-200"},similar:{label:"Similar mode",description:"Staying close to your comfort picks",accent:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-200"}};let C=Je(()=>a.recommendation?P(a.recommendation):[]);function q(){x(d,!e(d))}function J(_){a.onAlreadyWatched(_),x(d,!1)}function X(){e(o)||(x(o,!0),v&&clearTimeout(v),v=setTimeout(()=>{const _=a.onNotInterested();_ instanceof Promise?_.finally(()=>{x(o,!1),v=null}):(x(o,!1),v=null)},200))}function $(){x(i,!e(i))}const k=180;function D(_){if(!_)return null;const f=_.trim();return f.length<=k?f:`${f.slice(0,k).trimEnd()}‚Ä¶`}function P(_){const f=[],u=D(_.synopsis);u&&f.push({label:"Premise",value:u});const b=[..._.genres.slice(0,2),..._.themes.slice(0,1)];b.length>0&&f.push({label:"Tone",value:b.join(", ")});const z=[_.episodes?`${_.episodes} eps`:null,_.media_type??null,_.demographics[0]??null].filter(Boolean);if(z.length>0&&f.push({label:"Length",value:z.join(" ‚Ä¢ ")}),_.recommendation_reason&&f.push({label:"Why recommended",value:_.recommendation_reason}),f.length>3){const F=f.find(W=>W.label==="Why recommended"),S=f.filter(W=>W.label!=="Why recommended").slice(0,2);return F?[...S,F]:S}return f}vt(()=>{a.recommendation?.mal_id,x(d,!1),x(i,!1),x(o,!1),v&&(clearTimeout(v),v=null)}),Ot(()=>{v&&clearTimeout(v)});var G=Ze(),K=$e(G);{var j=_=>{var f=Nr(),u=l(f);let b;var z=l(u),F=l(z);{var S=A=>{var T=cr(),H=l(T);r(T),L(()=>{tt(H,"src",a.recommendation.image_url),tt(H,"alt",`${a.recommendation.title} poster`)}),c(A,T)},W=A=>{var T=vr();c(A,T)};E(F,A=>{a.recommendation.image_url?A(S):A(W,!1)})}var Q=n(F,2),ee=l(Q),ne=n(l(ee),2),_e=l(ne,!0);r(ne),r(ee);var ke=n(ee,2),ve=l(ke),pe=l(ve,!0);r(ve);var De=n(ve,2),Ne=l(De,!0);r(De),r(ke);var Ue=n(ke,2),Pe=l(Ue);{var Fe=A=>{var T=ur(),H=n(l(T));r(T),L(()=>h(H,` ${a.recommendation.score??""}`)),c(A,T)};E(Pe,A=>{a.recommendation.score&&A(Fe)})}var Ie=n(Pe,2);{var Be=A=>{var T=mr(),H=l(T);r(T),L(()=>h(H,`${a.recommendation.episodes??""} eps`)),c(A,T)};E(Ie,A=>{a.recommendation.episodes&&A(Be)})}var Ge=n(Ie,2);{var Xe=A=>{var T=fr(),H=l(T,!0);r(T),L(ie=>h(H,ie),[()=>a.recommendation.studios.join(", ")]),c(A,T)};E(Ge,A=>{a.recommendation.studios.length>0&&A(Xe)})}r(Ue),r(Q),r(z);var We=n(z,2),g=l(We);he(g,17,()=>a.recommendation.genres,Re,(A,T)=>{var H=xr(),ie=l(H,!0);r(H),L(()=>h(ie,e(T))),c(A,H)});var N=n(g,2);he(N,17,()=>a.recommendation.themes,Re,(A,T)=>{var H=gr(),ie=l(H,!0);r(H),L(()=>h(ie,e(T))),c(A,H)}),r(We);var w=n(We,2);{var Ae=A=>{var T=pr(),H=l(T,!0);r(T),L(()=>h(H,a.recommendation.synopsis)),c(A,T)};E(w,A=>{a.recommendation.synopsis&&A(Ae)})}var ye=n(w,2),qe=n(l(ye),2),I=l(qe,!0);r(qe),r(ye);var M=n(ye,2),B=l(M),V=l(B);V.__click=function(...A){a.onAddToWatchlist?.apply(this,A)};var oe=n(V,4),le=l(oe);le.__click=q;var de=n(le,2);de.__click=X;var Te=n(de,2);Te.__click=$;var ze=n(l(Te),2),et=l(ze,!0);r(ze),r(Te),r(oe);var re=n(oe,2);{var ce=A=>{var T=hr();he(T,21,()=>m,Re,(H,ie)=>{var be=br();be.__click=()=>J(e(ie).value);var Me=l(be),Ve=l(Me,!0);r(Me);var He=n(Me,2),Ye=l(He,!0);r(He),r(be),L(()=>{h(Ve,e(ie).icon),h(Ye,e(ie).label)}),c(H,be)}),r(T),c(A,T)};E(re,A=>{e(d)&&A(ce)})}var ue=n(re,2);{var Ee=A=>{var T=kr();he(T,21,()=>e(C),Re,(H,ie)=>{var be=_r(),Me=n(l(be),2),Ve=l(Me),He=l(Ve);r(Ve);var Ye=n(Ve);r(Me),r(be),L(()=>{h(He,`${e(ie).label??""}:`),h(Ye,` ${e(ie).value??""}`)}),c(H,be)}),r(T),c(A,T)};E(ue,A=>{e(i)&&e(C).length>0&&A(Ee)})}r(B);var Ke=n(B,2),se=l(Ke);se.__click=function(...A){a.onRegenerate?.apply(this,A)},r(Ke),r(M),r(u);var we=n(u,2);{var Qe=A=>{var T=Lr(),H=l(T);H.__click=()=>x(t,!e(t));var ie=n(l(H),2);let be;r(H);var Me=n(H,2);{var Ve=He=>{var Ye=Rr(),ct=l(Ye);{var pt=Z=>{var te=wr(),me=n(l(te),2);he(me,21,()=>a.preferenceProfile.preferred_genres,Re,(Ce,lt)=>{var je=yr(),it=l(je,!0);r(je),L(()=>h(it,e(lt))),c(Ce,je)}),r(me),r(te),c(Z,te)};E(ct,Z=>{a.preferenceProfile.preferred_genres.length>0&&Z(pt)})}var y=n(ct,2);{var R=Z=>{var te=Ir(),me=n(l(te),2);he(me,21,()=>a.preferenceProfile.preferred_themes,Re,(Ce,lt)=>{var je=Sr(),it=l(je,!0);r(je),L(()=>h(it,e(lt))),c(Ce,je)}),r(me),r(te),c(Z,te)};E(y,Z=>{a.preferenceProfile.preferred_themes.length>0&&Z(R)})}var Y=n(y,2);{var fe=Z=>{var te=Tr(),me=n(l(te),2);he(me,21,()=>a.preferenceProfile.avoided_genres,Re,(Ce,lt)=>{var je=Ar(),it=l(je,!0);r(je),L(()=>h(it,e(lt))),c(Ce,je)}),r(me),r(te),c(Z,te)};E(Y,Z=>{a.preferenceProfile.avoided_genres.length>0&&Z(fe)})}var xe=n(Y,2);{var Se=Z=>{var te=Er(),me=n(l(te),2),Ce=l(me,!0);r(me),r(te),L(()=>h(Ce,a.preferenceProfile.content_notes)),c(Z,te)};E(xe,Z=>{a.preferenceProfile.content_notes&&Z(Se)})}r(Ye),c(He,Ye)};E(Me,He=>{e(t)&&He(Ve)})}r(T),L(()=>be=ge(ie,0,"w-5 h-5 text-slate-500 transition-transform svelte-j36pc8",null,be,{"rotate-180":e(t)})),c(A,T)};E(we,A=>{a.preferenceProfile&&A(Qe)})}r(f),L(()=>{b=ge(u,1,"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-5 sm:p-8 mb-6 recommendation-card svelte-j36pc8",null,b,{"is-dismissing":e(o)}),h(_e,a.recommendation.title),ge(ve,1,`inline-flex w-fit items-center gap-2 px-3 py-1 rounded-full font-medium ${O[a.mode].accent}`,"svelte-j36pc8"),h(pe,O[a.mode].label),h(Ne,O[a.mode].description),h(I,a.recommendation.recommendation_reason),h(et,e(i)?"Hide":"Details")}),c(_,f)},U=_=>{var f=Pr();c(_,f)};E(K,_=>{a.recommendation?_(j):_(U,!1)})}c(s,G),dt()}ft(["click"]);var jr=p('<div class="absolute -top-2 -right-2 w-8 h-8 rounded-full bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-600 flex items-center justify-center shadow-sm"><span class="text-lg"> </span></div>'),Wr=p('<div class="shrink-0 w-20 sm:w-24 relative"><img class="w-full rounded-lg shadow-md object-cover" loading="lazy"/> <!></div>'),Mr=p('<div class="shrink-0 w-20 sm:w-24 h-28 sm:h-32 bg-slate-200 dark:bg-slate-700 rounded-lg flex items-center justify-center"><span class="text-2xl">üé¨</span></div>'),Hr=p('<div class="flex items-center gap-1 text-amber-600 dark:text-amber-400 font-bold text-lg"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg> <span> </span></div>'),Or=p('<div class="text-xs text-slate-500 dark:text-slate-400 mt-0.5"> </div>'),Dr=p("<option> </option>"),Ur=p('<span class="px-2 py-0.5 text-xs rounded-full bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300"> </span>'),Fr=p('<div class="flex flex-wrap gap-1.5 mb-3"></div>'),Br=p("<span> </span>"),Gr=p("<span> </span>"),qr=p("<span> </span>"),zr=p('<button type="button"><span class="text-base"> </span> <span class="text-xs font-medium"> </span></button>'),Vr=p('<div class="pt-3 border-t border-slate-200 dark:border-slate-700"><p class="text-xs font-medium text-slate-600 dark:text-slate-400 mb-2">How was it?</p> <div class="flex flex-wrap gap-2"></div></div>'),Yr=p('<p class="pt-2 text-xs text-slate-500 dark:text-slate-500">üí° Mark as completed to rate this anime</p>'),Jr=p('<div class="bg-white dark:bg-slate-800 rounded-xl p-5 border border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600 transition-colors"><div class="flex items-start gap-4"><!> <div class="flex-1 min-w-0"><div class="flex items-start justify-between gap-3 mb-2"><h3 class="font-semibold text-lg text-slate-900 dark:text-slate-100 flex-1"> </h3> <div class="shrink-0 text-right"><!> <!></div></div> <div class="flex flex-wrap items-center gap-2 mb-3"><span> </span> <select class="px-2.5 py-1 text-xs rounded-md border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-700 dark:text-slate-300 hover:border-slate-400 dark:hover:border-slate-500 transition-colors cursor-pointer"></select></div> <!> <div class="flex items-center gap-3 mb-3 text-xs text-slate-500 dark:text-slate-500"><!> <!> <!></div> <!></div></div></div>'),Xr=p(`<div class="text-center py-12"><div class="text-6xl mb-4">üìö</div> <h3 class="text-xl font-semibold text-slate-900 dark:text-slate-100 mb-2">Nothing in your watchlist yet</h3> <p class="text-slate-600 dark:text-slate-400">Start by searching for an anime you've enjoyed!</p> <button class="mt-4 px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors">Get Started</button></div>`),Kr=p('<div class="max-w-4xl mx-auto"><div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6"><div><h2 class="text-xl sm:text-2xl font-bold text-slate-900 dark:text-slate-100">Your Watchlist</h2> <p class="text-sm text-slate-600 dark:text-slate-400 mt-1"> <!></p> <p class="text-xs text-slate-500 dark:text-slate-400 mt-1 hidden sm:block">These statuses help Seer personalize future recommendations.</p></div> <div class="flex items-center gap-2"><button class="px-3 sm:px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-slate-700 dark:text-slate-300 text-xs sm:text-sm font-medium">Back</button> <button class="px-3 sm:px-4 py-2 rounded-lg border border-red-300 dark:border-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors text-red-700 dark:text-red-400 text-xs sm:text-sm font-medium">Clear All</button></div></div> <div class="flex flex-wrap gap-2 mb-6"><button> </button> <button> </button> <button> </button> <button> </button> <button> </button></div> <div class="grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4 mb-6"><div class="bg-white dark:bg-slate-800 rounded-lg p-4 text-center"><div class="text-2xl font-bold text-slate-900 dark:text-slate-100"> </div> <div class="text-xs text-slate-600 dark:text-slate-400 mt-1">Total</div></div> <div class="bg-white dark:bg-slate-800 rounded-lg p-4 text-center"><div class="text-2xl font-bold text-green-600 dark:text-green-400"> </div> <div class="text-xs text-slate-600 dark:text-slate-400 mt-1">Liked</div></div> <div class="bg-white dark:bg-slate-800 rounded-lg p-4 text-center"><div class="text-2xl font-bold text-slate-600 dark:text-slate-400"> </div> <div class="text-xs text-slate-600 dark:text-slate-400 mt-1">Neutral</div></div> <div class="bg-white dark:bg-slate-800 rounded-lg p-4 text-center"><div class="text-2xl font-bold text-red-600 dark:text-red-400"> </div> <div class="text-xs text-slate-600 dark:text-slate-400 mt-1">Disliked</div></div></div> <div class="space-y-4"></div> <!></div>');function Qr(s,a){ot(a,!0);let t=ae("all");function i(g){return g==="positive"?"üëç":g==="neutral"?"ü§î":g==="negative"?"üëé":"‚Äî"}let d=Je(()=>a.history.map((g,N)=>({item:g,originalIndex:N})).filter(({item:g})=>e(t)==="all"?!0:g.watch_status===e(t)).reverse()),o=Je(()=>({total:a.history.length,positive:a.history.filter(g=>g.rating==="positive").length,neutral:a.history.filter(g=>g.rating==="neutral").length,negative:a.history.filter(g=>g.rating==="negative").length}));const v=[{label:"Watching",value:"watching",description:"In progress"},{label:"Completed",value:"completed",description:"Finished"},{label:"Backlog",value:"backlog",description:"Saved for later"},{label:"Ignore",value:"ignored",description:"Not for me"}],m={watching:"bg-amber-100 text-amber-800 dark:bg-amber-900/40 dark:text-amber-200",completed:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/40 dark:text-emerald-200",backlog:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-200",ignored:"bg-slate-200 text-slate-700 dark:bg-slate-800 dark:text-slate-300"},O=[{value:"positive",emoji:"üôÇ",label:"Loved it"},{value:"neutral",emoji:"üòê",label:"It was fine"},{value:"negative",emoji:"ü§Æ",label:"Hard pass"}];var C=Kr(),q=l(C),J=l(q),X=n(l(J),2),$=l(X),k=n($);{var D=g=>{var N=Kt();L(()=>h(N,`¬∑ Showing ${e(d).length??""}`)),c(g,N)};E(k,g=>{e(t)!=="all"&&g(D)})}r(X),rt(2),r(J);var P=n(J,2),G=l(P);G.__click=function(...g){a.onBack?.apply(this,g)};var K=n(G,2);K.__click=function(...g){a.onClear?.apply(this,g)},r(P),r(q);var j=n(q,2),U=l(j);U.__click=()=>x(t,"all");var _=l(U);r(U);var f=n(U,2);f.__click=()=>x(t,"watching");var u=l(f);r(f);var b=n(f,2);b.__click=()=>x(t,"completed");var z=l(b);r(b);var F=n(b,2);F.__click=()=>x(t,"backlog");var S=l(F);r(F);var W=n(F,2);W.__click=()=>x(t,"ignored");var Q=l(W);r(W),r(j);var ee=n(j,2),ne=l(ee),_e=l(ne),ke=l(_e,!0);r(_e),rt(2),r(ne);var ve=n(ne,2),pe=l(ve),De=l(pe,!0);r(pe),rt(2),r(ve);var Ne=n(ve,2),Ue=l(Ne),Pe=l(Ue,!0);r(Ue),rt(2),r(Ne);var Fe=n(Ne,2),Ie=l(Fe),Be=l(Ie,!0);r(Ie),rt(2),r(Fe),r(ee);var Ge=n(ee,2);he(Ge,21,()=>e(d),({item:g,originalIndex:N})=>g.mal_id,(g,N)=>{let w=()=>e(N).item,Ae=()=>e(N).originalIndex;var ye=Jr(),qe=l(ye),I=l(qe);{var M=y=>{var R=Wr(),Y=l(R),fe=n(Y,2);{var xe=Se=>{var Z=jr(),te=l(Z),me=l(te,!0);r(te),r(Z),L(Ce=>h(me,Ce),[()=>i(w().rating)]),c(Se,Z)};E(fe,Se=>{w().rating&&Se(xe)})}r(R),L(()=>{tt(Y,"src",w().image_url),tt(Y,"alt",`${w().title} poster`)}),c(y,R)},B=y=>{var R=Mr();c(y,R)};E(I,y=>{w().image_url?y(M):y(B,!1)})}var V=n(I,2),oe=l(V),le=l(oe),de=l(le,!0);r(le);var Te=n(le,2),ze=l(Te);{var et=y=>{var R=Hr(),Y=n(l(R),2),fe=l(Y,!0);r(Y),r(R),L(()=>h(fe,w().score)),c(y,R)};E(ze,y=>{w().score&&w().score!=="N/A"&&y(et)})}var re=n(ze,2);{var ce=y=>{var R=Or(),Y=l(R);r(R),L(fe=>h(Y,`Rank #${fe??""}`),[()=>w().rank.toLocaleString()]),c(y,R)};E(re,y=>{w().rank&&y(ce)})}r(Te),r(oe);var ue=n(oe,2),Ee=l(ue),Ke=l(Ee,!0);r(Ee);var se=n(Ee,2);se.__change=y=>{const R=y.currentTarget;a.onUpdateStatus(Ae(),R.value)},he(se,21,()=>v,Re,(y,R)=>{var Y=Dr(),fe=l(Y);r(Y);var xe={};L(()=>{h(fe,`${e(R).label??""} ‚Äî ${e(R).description??""}`),xe!==(xe=e(R).value)&&(Y.value=(Y.__value=e(R).value)??"")}),c(y,Y)}),r(se);var we;La(se),r(ue);var Qe=n(ue,2);{var A=y=>{var R=Fr();he(R,21,()=>w().genres.slice(0,5),Re,(Y,fe)=>{var xe=Ur(),Se=l(xe,!0);r(xe),L(()=>h(Se,e(fe))),c(Y,xe)}),r(R),c(y,R)};E(Qe,y=>{w().genres.length>0&&y(A)})}var T=n(Qe,2),H=l(T);{var ie=y=>{var R=Br(),Y=l(R);r(R),L(()=>h(Y,`${w().episodes??""} eps`)),c(y,R)};E(H,y=>{w().episodes&&y(ie)})}var be=n(H,2);{var Me=y=>{var R=Gr(),Y=l(R,!0);r(R),L(()=>h(Y,w().studios[0])),c(y,R)};E(be,y=>{w().studios.length>0&&y(Me)})}var Ve=n(be,2);{var He=y=>{var R=qr(),Y=l(R);r(R),L(fe=>h(Y,`#${fe??""} popularity`),[()=>w().popularity.toLocaleString()]),c(y,R)};E(Ve,y=>{w().popularity&&y(He)})}r(T);var Ye=n(T,2);{var ct=y=>{var R=Vr(),Y=n(l(R),2);he(Y,21,()=>O,Re,(fe,xe)=>{var Se=zr();Se.__click=()=>a.onUpdateRating(Ae(),e(xe).value);var Z=l(Se),te=l(Z,!0);r(Z);var me=n(Z,2),Ce=l(me,!0);r(me),r(Se),L(()=>{ge(Se,1,`flex items-center gap-1.5 px-3 py-2 rounded-lg text-sm border transition-all ${w().rating===e(xe).value?"border-indigo-500 bg-indigo-50 text-indigo-700 dark:border-indigo-400 dark:bg-indigo-900/30 dark:text-indigo-200 shadow-sm":"border-slate-200 text-slate-600 hover:border-slate-400 dark:border-slate-700 dark:text-slate-300 dark:hover:border-slate-500"}`),h(te,e(xe).emoji),h(Ce,e(xe).label)}),c(fe,Se)}),r(Y),r(R),c(y,R)},pt=y=>{var R=Yr();c(y,R)};E(Ye,y=>{w().watch_status==="completed"?y(ct):y(pt,!1)})}r(V),r(qe),r(ye),L(y=>{h(de,w().title),ge(Ee,1,`px-2.5 py-1 text-xs rounded-full font-medium ${m[w().watch_status]}`),h(Ke,y),we!==(we=w().watch_status)&&(se.value=(se.__value=w().watch_status)??"",Yt(se,w().watch_status))},[()=>v.find(y=>y.value===w().watch_status)?.label??w().watch_status]),c(g,ye)}),r(Ge);var Xe=n(Ge,2);{var We=g=>{var N=Xr(),w=n(l(N),6);w.__click=function(...Ae){a.onBack?.apply(this,Ae)},r(N),c(g,N)};E(Xe,g=>{a.history.length===0&&g(We)})}r(C),L((g,N,w,Ae)=>{h($,`${e(o).total??""} anime tracked `),ge(U,1,`px-3 py-1.5 text-xs sm:text-sm rounded-lg border transition-colors font-medium ${e(t)==="all"?"border-indigo-500 bg-indigo-50 text-indigo-700 dark:border-indigo-400 dark:bg-indigo-900/30 dark:text-indigo-200":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:border-slate-400 dark:hover:border-slate-500"}`),h(_,`All (${e(o).total??""})`),ge(f,1,`px-3 py-1.5 text-xs sm:text-sm rounded-lg border transition-colors font-medium ${e(t)==="watching"?"border-amber-500 bg-amber-50 text-amber-700 dark:border-amber-400 dark:bg-amber-900/30 dark:text-amber-200":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:border-slate-400 dark:hover:border-slate-500"}`),h(u,`Watching (${g??""})`),ge(b,1,`px-3 py-1.5 text-xs sm:text-sm rounded-lg border transition-colors font-medium ${e(t)==="completed"?"border-emerald-500 bg-emerald-50 text-emerald-700 dark:border-emerald-400 dark:bg-emerald-900/30 dark:text-emerald-200":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:border-slate-400 dark:hover:border-slate-500"}`),h(z,`Completed (${N??""})`),ge(F,1,`px-3 py-1.5 text-xs sm:text-sm rounded-lg border transition-colors font-medium ${e(t)==="backlog"?"border-indigo-500 bg-indigo-50 text-indigo-700 dark:border-indigo-400 dark:bg-indigo-900/30 dark:text-indigo-200":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:border-slate-400 dark:hover:border-slate-500"}`),h(S,`Backlog (${w??""})`),ge(W,1,`px-3 py-1.5 text-xs sm:text-sm rounded-lg border transition-colors font-medium ${e(t)==="ignored"?"border-slate-500 bg-slate-50 text-slate-700 dark:border-slate-400 dark:bg-slate-800 dark:text-slate-200":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:border-slate-400 dark:hover:border-slate-500"}`),h(Q,`Ignored (${Ae??""})`),h(ke,e(o).total),h(De,e(o).positive),h(Pe,e(o).neutral),h(Be,e(o).negative)},[()=>a.history.filter(g=>g.watch_status==="watching").length,()=>a.history.filter(g=>g.watch_status==="completed").length,()=>a.history.filter(g=>g.watch_status==="backlog").length,()=>a.history.filter(g=>g.watch_status==="ignored").length]),c(s,C),dt()}ft(["click","change"]);var Zr=p(`<div class="max-w-4xl mx-auto px-4 py-8 animate-fade-in"><div class="mb-8"><h1 class="text-4xl font-bold text-slate-900 dark:text-white mb-3">Philosophy</h1> <p class="text-lg text-slate-600 dark:text-slate-400">Why Seer requires minimal input</p></div> <div class="space-y-8"><section class="bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 border border-slate-200 dark:border-slate-700"><h2 class="text-2xl font-semibold text-slate-900 dark:text-white mb-4">Minimal Input, Maximum Discovery</h2> <p class="text-slate-700 dark:text-slate-300 leading-relaxed mb-4">Most recommendation systems require you to rate dozens of shows,
                import your entire watch history, or fill out detailed
                preference surveys before they can help you.</p> <p class="text-slate-700 dark:text-slate-300 leading-relaxed">Seer takes a different approach: <strong>one show is enough</strong>. Add a single anime you enjoyed, and we'll find something new
                for you to watch.</p></section> <section class="bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 border border-slate-200 dark:border-slate-700"><h2 class="text-2xl font-semibold text-slate-900 dark:text-white mb-4">How It Works</h2> <div class="space-y-4"><div class="border-l-4 border-indigo-500 pl-4"><h3 class="font-semibold text-slate-900 dark:text-white mb-2">Simple Ratings</h3> <p class="text-slate-700 dark:text-slate-300 leading-relaxed">Three options (üëç üëé ü§î) instead of complex 10-point
                        scales. Less friction, faster decisions.</p></div> <div class="border-l-4 border-purple-500 pl-4"><h3 class="font-semibold text-slate-900 dark:text-white mb-2">AI Understanding</h3> <p class="text-slate-700 dark:text-slate-300 leading-relaxed">AI analyzes genres, themes, demographics, and narrative
                        patterns to understand what makes each show unique.</p></div> <div class="border-l-4 border-blue-500 pl-4"><h3 class="font-semibold text-slate-900 dark:text-white mb-2">Privacy First</h3> <p class="text-slate-700 dark:text-slate-300 leading-relaxed">Your watch history stays in your browser. Only minimal
                        data is sent for recommendations.</p></div></div></section></div></div>`);function $r(s){var a=Zr();c(s,a)}var es=p('<span class="opacity-75"> </span>'),ts=p("<div><span> </span> <span> </span> <!></div>");function as(s,a){ot(a,!0);let t=ae(null),i=ae(null),d=ae(""),o=null,v=null,m=null;const O=Je(()=>!!e(t)&&e(t).remaining<e(t).limit),C=Je(()=>!!e(t)||e(i)?.status==="ok"||e(i)?.status==="error"),q=Je(()=>e(t)?`${e(t).remaining}/${e(t).limit} requests`:e(i)?.status==="ok"?"API connected":e(i)?.status==="error"?"API error":""),J=Je(()=>e(t)?"API rate limit status":e(i)?.status==="ok"?"API responded successfully (no limit data provided)":e(i)?.status==="error"?"Recent API request failed; check backend":""),X=Je(()=>(()=>{if(e(t)){const j=e(t).remaining/e(t).limit*100;return j>50?"‚úì":(j>25,"‚ö†")}return e(i)?.status==="ok"?"‚úì":e(i)?.status==="error"?"‚ö†":""})());function $(){x(t,Ca(),!0),x(i,ja(),!0),e(t)?k():x(d,"")}function k(){if(!e(t)){x(d,"");return}const j=Math.floor(Date.now()/1e3),U=e(t).reset-j;if(U<=0)x(d,"Reset available");else if(U<60)x(d,`${U}s`);else{const _=Math.floor(U/60);x(d,`${_}m`)}}Dt(()=>{$(),v=Wa(j=>{x(i,j,!0)}),m=Ma(j=>{x(t,j,!0),k()}),o=setInterval(()=>{k()},1e3)}),Ot(()=>{o&&clearInterval(o),v&&v(),m&&m()});function D(){if(e(t)){const j=e(t).remaining/e(t).limit*100;return j>50?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":j>25?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"}return e(i)?.status==="ok"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":e(i)?.status==="error"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"bg-slate-100 text-slate-600 dark:bg-slate-800/70 dark:text-slate-200"}var P=Ze(),G=$e(P);{var K=j=>{var U=ts(),_=l(U),f=l(_,!0);r(_);var u=n(_,2),b=l(u,!0);r(u);var z=n(u,2);{var F=S=>{var W=es(),Q=l(W);r(W),L(()=>h(Q,`‚Ä¢ ${e(d)??""}`)),c(S,W)};E(z,S=>{e(O)&&S(F)})}r(U),L(S=>{ge(U,1,S),tt(U,"title",e(J)),h(f,e(X)),h(b,e(q))},[()=>`hidden sm:inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium ${D()}`]),c(j,U)};E(G,j=>{e(C)&&j(K)})}c(s,P),dt()}var rs=p('<div class="mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg"><p class="text-sm text-red-800 dark:text-red-200"> </p> <button class="mt-2 text-xs text-red-600 dark:text-red-400 hover:underline">Dismiss</button></div>'),ss=p('<button type="button"><div class="font-semibold text-sm mb-1"> </div> <div class="text-xs opacity-80"> </div></button>'),ls=p(`<p class="text-xs text-center text-slate-500 dark:text-slate-400">Add a show to your watchlist to enable
                                recommendations.</p>`),is=p(`<div class="mb-6"><div class="bg-white/80 dark:bg-slate-900/60 border border-slate-200 dark:border-slate-800 rounded-2xl p-5 flex flex-col gap-4"><div><p class="text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 font-semibold mb-2">Ready for something new?</p> <p class="text-sm text-slate-600 dark:text-slate-300">Choose your vibe and get a personalized
                            recommendation based on your watchlist.</p></div> <div class="flex flex-col gap-2"><p class="text-xs font-medium text-slate-700 dark:text-slate-300">Recommendation Mode</p> <div class="grid grid-cols-1 sm:grid-cols-2 gap-2"></div></div> <div class="flex flex-col gap-2"><button type="button" class="px-5 py-2.5 rounded-lg text-sm font-semibold text-white bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-300 disabled:text-slate-500 disabled:cursor-not-allowed transition-colors"> </button> <!></div></div></div>`),ns=p('<div class="flex items-center justify-center py-20 animate-fade-in"><div class="text-center"><div class="inline-block h-10 w-10 animate-spin rounded-full border-4 border-solid border-indigo-600 border-r-transparent mb-4"></div> <p class="text-lg font-medium text-slate-700 dark:text-slate-300">Finding your next anime...</p> <p class="text-sm text-slate-500 dark:text-slate-400 mt-2">Analyzing your preferences</p></div></div>'),os=p('<div class="animate-fade-in"><!></div>'),ds=p('<div class="animate-fade-in"><!></div>'),cs=p('<div class="animate-fade-in"><!></div>'),vs=p('<div class="animate-fade-in"><!></div>'),us=p('<main class="min-h-screen bg-linear-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800"><header class="border-b border-slate-200 dark:border-slate-700 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm sticky top-0 z-10"><div class="max-w-5xl mx-auto px-4 py-3 sm:py-4"><div class="flex items-center justify-between mb-2 sm:mb-0"><div class="flex items-center gap-2 sm:gap-3"><h1 class="text-xl sm:text-2xl font-bold bg-linear-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">Seer</h1> <!></div> <div class="flex items-center gap-1 sm:gap-2"><button>Home</button> <button><span class="hidden sm:inline">Watchlist</span> <span class="sm:hidden">List</span> <span class="ml-1"> </span></button> <button>Philosophy</button> <button class="px-2 sm:px-3 py-1.5 text-xs sm:text-sm rounded-lg text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Export</button> <label class="px-2 sm:px-3 py-1.5 text-xs sm:text-sm rounded-lg text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors cursor-pointer">Import <input type="file" accept=".json" class="hidden"/></label></div></div></div></header> <div class="max-w-5xl mx-auto px-4 py-8"><!> <!> <!></div></main>');function _s(s,a){ot(a,!0);let t=ae(It([])),i=ae(null),d=ae(null),o=ae(!1),v=ae(null),m=ae("search"),O=ae("explore"),C=ae(It([]));const q=[{id:"explore",label:"Explore",description:"Discover bold picks outside your comfort zone"},{id:"similar",label:"Similar",description:"Stay close to favorites with familiar vibes"}];Dt(()=>{x(t,za(),!0),e(t).length>0&&x(m,"recommendation")}),vt(()=>{e(t).length>0&&Ht(e(t))}),vt(()=>{e(t).length>0&&e(m)==="search"&&x(m,"recommendation")});function J(){x(C,[],!0)}function X(I){if(!I)return;const M=new Set(e(C));M.add(I),x(C,Array.from(M).slice(-200),!0)}function $(){return e(C)}function k(I){if(e(t).some(V=>V.mal_id===I.mal_id))return;const B=e(t).length===0;x(t,[...e(t),I],!0),B&&(J(),x(m,"watchlist"))}async function D(){if(e(t).length!==0){x(o,!0),x(v,null);try{const I=$(),M=await Ba(e(t),e(O),I),B=M.recommendation??null;if(!M||!B)throw new Error("Failed to get recommendation");x(i,B,!0),x(d,M.preference_profile??null,!0),x(m,"recommendation")}catch(I){I.detail?x(v,I.detail,!0):I.message?x(v,I.message,!0):x(v,"Failed to get recommendation"),console.error("Recommendation error:",I)}finally{x(o,!1)}}}function P(I,M={}){if(!e(i))return;const B={positive:"completed",neutral:"backlog",negative:"ignored"},V=M.watchStatus??B[I],oe=M.hasSeen??V==="completed",le={...e(i),has_seen:oe,rating:I,watch_status:V};x(t,[...e(t),le],!0),x(i,null)}function G(){if(!e(i))return;const I={...e(i),has_seen:!1,rating:null,watch_status:"backlog"};x(t,[...e(t),I],!0),x(i,null)}function K(I){P(I,{watchStatus:"completed",hasSeen:!0})}async function j(){!e(i)||e(o)||(X(e(i).mal_id),P("negative",{watchStatus:"ignored",hasSeen:!1}),await D())}async function U(){e(i)&&X(e(i).mal_id),await D()}function _(){Va(e(t))}async function f(I){const B=I.target.files?.[0];if(B)try{const V=await Ya(B);x(t,V,!0),Ht(e(t)),x(m,"watchlist"),J()}catch(V){x(v,V instanceof Error?V.message:"Failed to import watchlist",!0),console.error("Import error:",V)}}function u(){confirm("Are you sure you want to clear your entire watchlist?")&&(x(t,[],!0),x(i,null),x(d,null),Ja(),J(),x(m,"search"))}function b(I,M){x(t,e(t).map((B,V)=>V!==I?B:{...B,watch_status:M,has_seen:M==="completed"}),!0)}function z(I,M){x(t,e(t).map((B,V)=>V!==I||B.watch_status!=="completed"?B:{...B,rating:M}),!0)}var F=us(),S=l(F),W=l(S),Q=l(W),ee=l(Q),ne=n(l(ee),2);as(ne,{}),r(ee);var _e=n(ee,2),ke=l(_e);ke.__click=()=>x(m,e(t).length>0?"recommendation":"search",!0);let ve;var pe=n(ke,2);pe.__click=()=>x(m,"watchlist");let De;var Ne=n(l(pe),4),Ue=l(Ne);r(Ne),r(pe);var Pe=n(pe,2);Pe.__click=()=>x(m,"philosophy");let Fe;var Ie=n(Pe,2);Ie.__click=_;var Be=n(Ie,2),Ge=n(l(Be));Ge.__change=f,r(Be),r(_e),r(Q),r(W),r(S);var Xe=n(S,2),We=l(Xe);{var g=I=>{var M=rs(),B=l(M),V=l(B,!0);r(B);var oe=n(B,2);oe.__click=()=>x(v,null),r(M),L(()=>h(V,e(v))),c(I,M)};E(We,I=>{e(v)&&I(g)})}var N=n(We,2);{var w=I=>{var M=is(),B=l(M),V=n(l(B),2),oe=n(l(V),2);he(oe,21,()=>q,Re,(re,ce)=>{var ue=ss();ue.__click=()=>x(O,e(ce).id,!0);var Ee=l(ue),Ke=l(Ee,!0);r(Ee);var se=n(Ee,2),we=l(se,!0);r(se),r(ue),L(()=>{ue.disabled=e(o),ge(ue,1,`text-left px-4 py-3 rounded-lg border transition-all disabled:opacity-50 disabled:cursor-not-allowed ${e(O)===e(ce).id?"border-indigo-500 bg-indigo-50/70 dark:bg-indigo-900/20 text-indigo-900 dark:text-indigo-50 shadow-sm":"border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 hover:border-slate-300 dark:hover:border-slate-500"}`),h(Ke,e(ce).label),h(we,e(ce).description)}),c(re,ue)}),r(oe),r(V);var le=n(V,2),de=l(le);de.__click=function(...re){(e(i)?U:D)?.apply(this,re)};var Te=l(de,!0);r(de);var ze=n(de,2);{var et=re=>{var ce=ls();c(re,ce)};E(ze,re=>{e(t).length===0&&re(et)})}r(le),r(B),r(M),L(()=>{de.disabled=e(t).length===0||e(o),h(Te,e(o)?"Finding your next anime...":e(i)?"Get another recommendation":"Get recommendation")}),c(I,M)};E(N,I=>{e(m)!=="philosophy"&&e(t).length>0&&I(w)})}var Ae=n(N,2);{var ye=I=>{var M=ns();c(I,M)},qe=I=>{var M=Ze(),B=$e(M);{var V=le=>{var de=os(),Te=l(de);dr(Te,{get history(){return e(t)},onAnimeSelected:k}),r(de),c(le,de)},oe=le=>{var de=Ze(),Te=$e(de);{var ze=re=>{var ce=ds(),ue=l(ce);Cr(ue,{get recommendation(){return e(i)},get preferenceProfile(){return e(d)},onAddToWatchlist:G,onAlreadyWatched:K,onNotInterested:j,onRegenerate:U,get mode(){return e(O)}}),r(ce),c(re,ce)},et=re=>{var ce=Ze(),ue=$e(ce);{var Ee=se=>{var we=cs(),Qe=l(we);Qr(Qe,{get history(){return e(t)},onBack:()=>x(m,e(t).length>0?"recommendation":"search",!0),onClear:u,onUpdateStatus:b,onUpdateRating:z}),r(we),c(se,we)},Ke=se=>{var we=Ze(),Qe=$e(we);{var A=T=>{var H=vs(),ie=l(H);$r(ie),r(H),c(T,H)};E(Qe,T=>{e(m)==="philosophy"&&T(A)},!0)}c(se,we)};E(ue,se=>{e(m)==="watchlist"?se(Ee):se(Ke,!1)},!0)}c(re,ce)};E(Te,re=>{e(m)==="recommendation"?re(ze):re(et,!1)},!0)}c(le,de)};E(B,le=>{e(m)==="search"&&e(t).length===0?le(V):le(oe,!1)},!0)}c(I,M)};E(Ae,I=>{e(o)?I(ye):I(qe,!1)})}r(Xe),r(F),L(()=>{ve=ge(ke,1,"px-2 sm:px-3 py-1.5 text-xs sm:text-sm rounded-lg text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",null,ve,{"bg-slate-100":e(m)==="recommendation"||e(m)==="search","dark:bg-slate-800":e(m)==="recommendation"||e(m)==="search"}),De=ge(pe,1,"px-2 sm:px-3 py-1.5 text-xs sm:text-sm rounded-lg text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",null,De,{"bg-slate-100":e(m)==="watchlist","dark:bg-slate-800":e(m)==="watchlist"}),h(Ue,`(${e(t).length??""})`),Fe=ge(Pe,1,"px-2 sm:px-3 py-1.5 text-xs sm:text-sm rounded-lg text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",null,Fe,{"bg-slate-100":e(m)==="philosophy","dark:bg-slate-800":e(m)==="philosophy"}),Ie.disabled=e(t).length===0}),c(s,F),dt()}ft(["click","change"]);export{_s as component};
